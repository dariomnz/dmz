// RUN: compiler %s -I std %S/../../std/std.dmz -run | filecheck %s

// CHECK: vector []
// CHECK: vector [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
// CHECK: vector [4, 5, 6, 7, 8, 9]
// CHECK-NOT: {{.*}}

const std = import("std");

fn printVector<T>(v: *std.vec<T>) -> void {
    std.io.printf("vector [");
    let i = 0;
    while (i < v.size()) {
        std.io.printf("%d", try v.get(i));
        if (i != v.size() - 1) {
            std.io.printf(", ");
        }

        i = i + 1;
    }
    std.io.printf("]\n");
}

fn main() -> void {
    let v = std.vec<i32>.init();
    defer v.deinit();

    printVector<i32>(&v);

    let i = 0;
    while (i < 10) {
        try v.add(i);
        i = i + 1;
    }

    printVector<i32>(&v);
    
    i = 0;
    while (i < 4) {
        try v.remove(0);
        i = i + 1;
    }

    printVector<i32>(&v);
}
