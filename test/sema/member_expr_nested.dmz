// RUN: compiler %s -res-dump 2>&1 | filecheck %s
struct S {
  x: i32,
  n: S2
}

struct S2 {
  x: i32
}

fn main() -> void {
  let s = S { x: 0, n: S2 { x: 1 } };

  let x = s.n.x;
}
// CHECK: ResolvedStructDecl Struct S
// CHECK-NEXT:   ResolvedFieldDecl:Int i32 x
// CHECK-NEXT:   ResolvedFieldDecl:Struct S2 n
// CHECK-NEXT: ResolvedStructDecl Struct S2
// CHECK-NEXT:   ResolvedFieldDecl:Int i32 x

// CHECK-NEXT: ResolvedFunctionDecl main -> Void void
// CHECK-NEXT:   ResolvedBlock
// CHECK-NEXT:     ResolvedDeclStmt
// CHECK-NEXT:       ResolvedVarDecl:Struct S s
// CHECK-NEXT:         ResolvedStructInstantiationExpr:Struct S
// CHECK-NEXT:           ResolvedFieldInitStmt:Int i32 x
// CHECK-NEXT:             ResolvedIntLiteral:Int i32 '0'
// CHECK-NEXT:             | value: 0
// CHECK-NEXT:           ResolvedFieldInitStmt:Struct S2 n
// CHECK-NEXT:             ResolvedStructInstantiationExpr:Struct S2
// CHECK-NEXT:               ResolvedFieldInitStmt:Int i32 x
// CHECK-NEXT:                 ResolvedIntLiteral:Int i32 '1'
// CHECK-NEXT:                 | value: 1
// CHECK-NEXT:     ResolvedDeclStmt
// CHECK-NEXT:       ResolvedVarDecl:Int i32 x
// CHECK-NEXT:         ResolvedMemberExpr:Int i32 x
// CHECK-NEXT:           ResolvedMemberExpr:Struct S2 n
// CHECK-NEXT:             ResolvedDeclRefExpr:Struct S s