// RUN: compiler %s -module -res-dump -no-remove-unused 2>&1 | filecheck %s
module ops {
    struct str_ops {
        x:i32,
        y:i32,
        z:i32,
    }

    fn print(x:i32) -> void {
        println(x);
    }

    extern fn printf(fmt:*u8, ...) -> i32;

    fn println(n:i32) -> void {
        printf("%d\n", n);
    }

    module integer {
        fn add(x:i32, y:i32) -> i32 {
            return x + y;
        }

        fn sub(x:i32, y:i32) -> i32 {
            return x - y;
        }
    }
}
// CHECK: ResolvedModuleDecl ops
// CHECK-NEXT:   ResolvedStructDecl Struct str_ops
// CHECK-NEXT:     ResolvedFieldDecl:Int i32 x
// CHECK-NEXT:     ResolvedFieldDecl:Int i32 y
// CHECK-NEXT:     ResolvedFieldDecl:Int i32 z
// CHECK-NEXT:   ResolvedModuleDecl integer
// CHECK-NEXT:     ResolvedFunctionDecl add -> Int i32
// CHECK-NEXT:       ResolvedParamDecl:Int i32 x
// CHECK-NEXT:       ResolvedParamDecl:Int i32 y
// CHECK-NEXT:       ResolvedBlock
// CHECK-NEXT:         ResolvedReturnStmt
// CHECK-NEXT:           ResolvedBinaryOperator:Int i32 '+'
// CHECK-NEXT:             ResolvedDeclRefExpr:Int i32 x
// CHECK-NEXT:             ResolvedDeclRefExpr:Int i32 y
// CHECK-NEXT:     ResolvedFunctionDecl sub -> Int i32
// CHECK-NEXT:       ResolvedParamDecl:Int i32 x
// CHECK-NEXT:       ResolvedParamDecl:Int i32 y
// CHECK-NEXT:       ResolvedBlock
// CHECK-NEXT:         ResolvedReturnStmt
// CHECK-NEXT:           ResolvedBinaryOperator:Int i32 '-'
// CHECK-NEXT:             ResolvedDeclRefExpr:Int i32 x
// CHECK-NEXT:             ResolvedDeclRefExpr:Int i32 y
// CHECK-NEXT:   ResolvedFunctionDecl print -> Void void
// CHECK-NEXT:     ResolvedParamDecl:Int i32 x
// CHECK-NEXT:     ResolvedBlock
// CHECK-NEXT:       ResolvedCallExpr:Void void
// CHECK-NEXT:         ResolvedFunctionDecl println -> Void void
// CHECK-NEXT:         ResolvedDeclRefExpr:Int i32 x
// CHECK-NEXT:   ResolvedExternFunctionDecl printf -> Int i32
// CHECK-NEXT:     ResolvedParamDecl:UInt *u8 fmt
// CHECK-NEXT:     ResolvedParamDecl:vararg ...
// CHECK-NEXT:   ResolvedFunctionDecl println -> Void void
// CHECK-NEXT:     ResolvedParamDecl:Int i32 n
// CHECK-NEXT:     ResolvedBlock
// CHECK-NEXT:       ResolvedCallExpr:Int i32
// CHECK-NEXT:         ResolvedExternFunctionDecl printf -> Int i32
// CHECK-NEXT:         ResolvedStringLiteral:UInt *u8 '%d\n'
// CHECK-NEXT:         ResolvedDeclRefExpr:Int i32 n