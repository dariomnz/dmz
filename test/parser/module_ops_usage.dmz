// RUN: dmz %s -ast-dump 2>&1 | filecheck %s

const ops = import("module_ops.dmz");
// CHECK: DeclStmt
// CHECK-NEXT:   VarDecl:const  ops
// CHECK-NEXT:     ImportExpr module_ops.dmz

fn main() -> void {
    let x = 1;
    let y = 2;

    ops.print(x);

    let result = ops.integer.add(x, y);
    
    ops.print(result);
}
// CHECK: FunctionDecl main -> void
// CHECK-NEXT:   Block
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl: x
// CHECK-NEXT:         IntLiteral '1'
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl: y
// CHECK-NEXT:         IntLiteral '2'
// CHECK-NEXT:     CallExpr
// CHECK-NEXT:       MemberExpr .print
// CHECK-NEXT:         DeclRefExpr ops
// CHECK-NEXT:       DeclRefExpr x
// CHECK-NEXT:     DeclStmt
// CHECK-NEXT:       VarDecl: result
// CHECK-NEXT:         CallExpr
// CHECK-NEXT:           MemberExpr .add
// CHECK-NEXT:             MemberExpr .integer
// CHECK-NEXT:               DeclRefExpr ops
// CHECK-NEXT:           DeclRefExpr x
// CHECK-NEXT:           DeclRefExpr y
// CHECK-NEXT:     CallExpr
// CHECK-NEXT:       MemberExpr .print
// CHECK-NEXT:         DeclRefExpr ops
// CHECK-NEXT:       DeclRefExpr result